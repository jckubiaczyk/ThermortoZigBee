(kicad_sch (version 20230121) (generator eeschema)

  (uuid e6521bef-4109-48f7-8b88-4121b0468927)

  (paper "A4")

  (title_block
    (title "Thermor Zigbee Controller")
    (date "2024-01-15")
    (rev "1.0")
    (company "DIY Smart Home")
    (comment 1 "ESP32-C6 based Zigbee controller for Thermor heaters")
    (comment 2 "Reuses existing LCD display and button matrix")
  )

  (lib_symbols
    (symbol "ESP32-C6-WROOM-1" (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 25.4 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "ESP32-C6-WROOM-1" (at 0 22.86 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "RF_Module:ESP32-C6-WROOM-1" (at 0 -27.94 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "ESP32-C6-WROOM-1_0_1"
        (rectangle (start -12.7 20.32) (end 12.7 -20.32)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "ESP32-C6-WROOM-1_1_1"
        (pin power_in line (at -15.24 17.78 0) (length 2.54)
          (name "3V3" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -15.24 15.24 0) (length 2.54)
          (name "EN" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 10.16 0) (length 2.54)
          (name "IO4" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 7.62 0) (length 2.54)
          (name "IO5" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 5.08 0) (length 2.54)
          (name "IO6" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 2.54 0) (length 2.54)
          (name "IO7" (effects (font (size 1.27 1.27))))
          (number "6" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 0 0) (length 2.54)
          (name "IO8" (effects (font (size 1.27 1.27))))
          (number "7" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 -2.54 0) (length 2.54)
          (name "IO9" (effects (font (size 1.27 1.27))))
          (number "8" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 -5.08 0) (length 2.54)
          (name "IO10" (effects (font (size 1.27 1.27))))
          (number "9" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 -7.62 0) (length 2.54)
          (name "IO11" (effects (font (size 1.27 1.27))))
          (number "10" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 -10.16 0) (length 2.54)
          (name "IO12" (effects (font (size 1.27 1.27))))
          (number "11" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -15.24 -12.7 0) (length 2.54)
          (name "IO13" (effects (font (size 1.27 1.27))))
          (number "12" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -12.7 180) (length 2.54)
          (name "IO18" (effects (font (size 1.27 1.27))))
          (number "13" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -10.16 180) (length 2.54)
          (name "IO19" (effects (font (size 1.27 1.27))))
          (number "14" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -7.62 180) (length 2.54)
          (name "IO20" (effects (font (size 1.27 1.27))))
          (number "15" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -5.08 180) (length 2.54)
          (name "IO21" (effects (font (size 1.27 1.27))))
          (number "16" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 -2.54 180) (length 2.54)
          (name "IO22" (effects (font (size 1.27 1.27))))
          (number "17" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 0 180) (length 2.54)
          (name "IO23" (effects (font (size 1.27 1.27))))
          (number "18" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -22.86 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "19" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 5.08 180) (length 2.54)
          (name "IO0" (effects (font (size 1.27 1.27))))
          (number "20" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 7.62 180) (length 2.54)
          (name "IO1" (effects (font (size 1.27 1.27))))
          (number "21" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 10.16 180) (length 2.54)
          (name "IO2" (effects (font (size 1.27 1.27))))
          (number "22" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 12.7 180) (length 2.54)
          (name "IO3" (effects (font (size 1.27 1.27))))
          (number "23" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 15.24 180) (length 2.54)
          (name "TXD0" (effects (font (size 1.27 1.27))))
          (number "24" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at 15.24 17.78 180) (length 2.54)
          (name "RXD0" (effects (font (size 1.27 1.27))))
          (number "25" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "HT1621" (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 10.16 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "HT1621" (at 0 7.62 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Package_SO:SSOP-28_5.3x10.2mm_P0.65mm" (at 0 -12.7 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "HT1621_0_1"
        (rectangle (start -7.62 5.08) (end 7.62 -10.16)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
      )
      (symbol "HT1621_1_1"
        (pin power_in line (at -10.16 2.54 0) (length 2.54)
          (name "VDD" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at -10.16 0 0) (length 2.54)
          (name "VSS" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -10.16 -2.54 0) (length 2.54)
          (name "CS" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin input line (at -10.16 -5.08 0) (length 2.54)
          (name "WR" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
        (pin bidirectional line (at -10.16 -7.62 0) (length 2.54)
          (name "DATA" (effects (font (size 1.27 1.27))))
          (number "5" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "PC817" (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (at 0 5.08 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "PC817" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Package_DIP:DIP-4_W7.62mm" (at 0 -5.08 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "PC817_0_1"
        (rectangle (start -5.08 1.27) (end 5.08 -3.81)
          (stroke (width 0.254) (type default))
          (fill (type background))
        )
        (polyline
          (pts
            (xy -3.175 -0.635)
            (xy -1.905 -0.635)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 2.54 -0.635)
            (xy 4.445 -2.54)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 4.445 -2.54)
            (xy 5.08 -2.54)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 4.445 1.27)
            (xy 5.08 1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.54 -0.635)
            (xy -2.54 -2.54)
            (xy -5.08 -2.54)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 2.54 1.905)
            (xy 2.54 -2.54)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -5.08 1.27)
            (xy -2.54 1.27)
            (xy -2.54 -0.635)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -3.175 0.635)
            (xy -1.905 0.635)
            (xy -2.54 -0.635)
            (xy -3.175 0.635)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 3.81 -1.905)
            (xy 4.445 -1.27)
            (xy 4.445 -2.54)
            (xy 3.81 -1.905)
          )
          (stroke (width 0.254) (type default))
          (fill (type outline))
        )
      )
      (symbol "PC817_1_1"
        (pin passive line (at -7.62 1.27 0) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at -7.62 -2.54 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 7.62 -2.54 180) (length 2.54)
          (name "E" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 7.62 1.27 180) (length 2.54)
          (name "C" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 127 63.5) (diameter 0) (color 0 0 0 0)
    (uuid 0a9c6b8e-1234-5678-9abc-def012345678)
  )

  (no_connect (at 101.6 88.9) (uuid 1a2b3c4d-5678-90ab-cdef-123456789012))

  (wire (pts (xy 88.9 63.5) (xy 127 63.5))
    (stroke (width 0) (type default))
    (uuid 2b3c4d5e-6789-01ab-def0-234567890123)
  )

  (wire (pts (xy 127 63.5) (xy 127 66.04))
    (stroke (width 0) (type default))
    (uuid 3c4d5e6f-7890-12ab-ef01-345678901234)
  )

  (text "ESP32-C6 ZIGBEE CONTROLLER\nFOR THERMOR EMOTION 4\n" (at 127 25.4 0)
    (effects (font (size 2.54 2.54) (thickness 0.508) bold) (justify center))
    (uuid 4d5e6f70-8901-23ab-f012-456789012345)
  )

  (text "LCD Interface" (at 180.34 55.88 0)
    (effects (font (size 1.905 1.905) (thickness 0.381) bold) (justify left))
    (uuid 5e6f7081-9012-34ab-0123-567890123456)
  )

  (text "Button Matrix" (at 180.34 101.6 0)
    (effects (font (size 1.905 1.905) (thickness 0.381) bold) (justify left))
    (uuid 6f708192-0123-45ab-1234-678901234567)
  )

  (text "Power Supply" (at 50.8 55.88 0)
    (effects (font (size 1.905 1.905) (thickness 0.381) bold) (justify left))
    (uuid 70819203-1234-56ab-2345-789012345678)
  )

  (text "Triac Control" (at 50.8 139.7 0)
    (effects (font (size 1.905 1.905) (thickness 0.381) bold) (justify left))
    (uuid 81920314-2345-67ab-3456-890123456789)
  )

  (symbol (lib_id "ESP32-C6-WROOM-1") (at 127 88.9 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 92031425-3456-78ab-4567-901234567890)
    (property "Reference" "U1" (at 127 60.96 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "ESP32-C6-WROOM-1" (at 127 63.5 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "RF_Module:ESP32-C6-WROOM-1" (at 127 116.84 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 127 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 92031425-3456-78ab-4567-901234567891))
    (pin "2" (uuid 92031425-3456-78ab-4567-901234567892))
    (pin "3" (uuid 92031425-3456-78ab-4567-901234567893))
    (pin "4" (uuid 92031425-3456-78ab-4567-901234567894))
    (pin "5" (uuid 92031425-3456-78ab-4567-901234567895))
    (pin "6" (uuid 92031425-3456-78ab-4567-901234567896))
    (pin "7" (uuid 92031425-3456-78ab-4567-901234567897))
    (pin "8" (uuid 92031425-3456-78ab-4567-901234567898))
    (pin "9" (uuid 92031425-3456-78ab-4567-901234567899))
    (pin "10" (uuid 92031425-3456-78ab-4567-90123456789a))
    (pin "11" (uuid 92031425-3456-78ab-4567-90123456789b))
    (pin "12" (uuid 92031425-3456-78ab-4567-90123456789c))
    (pin "13" (uuid 92031425-3456-78ab-4567-90123456789d))
    (pin "14" (uuid 92031425-3456-78ab-4567-90123456789e))
    (pin "15" (uuid 92031425-3456-78ab-4567-90123456789f))
    (pin "16" (uuid 92031425-3456-78ab-4567-901234567810))
    (pin "17" (uuid 92031425-3456-78ab-4567-901234567811))
    (pin "18" (uuid 92031425-3456-78ab-4567-901234567812))
    (pin "19" (uuid 92031425-3456-78ab-4567-901234567813))
    (pin "20" (uuid 92031425-3456-78ab-4567-901234567814))
    (pin "21" (uuid 92031425-3456-78ab-4567-901234567815))
    (pin "22" (uuid 92031425-3456-78ab-4567-901234567816))
    (pin "23" (uuid 92031425-3456-78ab-4567-901234567817))
    (pin "24" (uuid 92031425-3456-78ab-4567-901234567818))
    (pin "25" (uuid 92031425-3456-78ab-4567-901234567819))
    (instances
      (project "thermor_zigbee_controller"
        (path "/e6521bef-4109-48f7-8b88-4121b0468927"
          (reference "U1") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "HT1621") (at 203.2 71.12 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid a3142536-4567-89ab-5678-012345678901)
    (property "Reference" "U2" (at 203.2 58.42 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "HT1621" (at 203.2 60.96 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Package_SO:SSOP-28_5.3x10.2mm_P0.65mm" (at 203.2 83.82 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 203.2 71.12 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid a3142536-4567-89ab-5678-012345678902))
    (pin "2" (uuid a3142536-4567-89ab-5678-012345678903))
    (pin "3" (uuid a3142536-4567-89ab-5678-012345678904))
    (pin "4" (uuid a3142536-4567-89ab-5678-012345678905))
    (pin "5" (uuid a3142536-4567-89ab-5678-012345678906))
    (instances
      (project "thermor_zigbee_controller"
        (path "/e6521bef-4109-48f7-8b88-4121b0468927"
          (reference "U2") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "PC817") (at 88.9 157.48 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid b4253647-5678-90ab-6789-123456789012)
    (property "Reference" "U3" (at 88.9 149.86 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "PC817" (at 88.9 152.4 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Package_DIP:DIP-4_W7.62mm" (at 88.9 162.56 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 88.9 157.48 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid b4253647-5678-90ab-6789-123456789013))
    (pin "2" (uuid b4253647-5678-90ab-6789-123456789014))
    (pin "3" (uuid b4253647-5678-90ab-6789-123456789015))
    (pin "4" (uuid b4253647-5678-90ab-6789-123456789016))
    (instances
      (project "thermor_zigbee_controller"
        (path "/e6521bef-4109-48f7-8b88-4121b0468927"
          (reference "U3") (unit 1)
        )
      )
    )
  )

  (sheet_instances
    (path "/" (page "1"))
  )
)