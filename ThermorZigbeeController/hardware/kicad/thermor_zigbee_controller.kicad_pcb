(kicad_pcb (version 20221018) (generator pcbnew)

  (general
    (thickness 1.6)
  )

  (paper "A4")
  (title_block
    (title "Thermor Zigbee Controller")
    (date "2024-01-20")
    (rev "1.0")
    (company "")
    (comment 1 "ESP32-C6 Based Zigbee Controller")
    (comment 2 "For Thermor Emotion 4 Radiator")
  )

  (layers
    (0 "F.Cu" signal)
    (31 "B.Cu" signal)
    (32 "B.Adhes" user "B.Adhesive")
    (33 "F.Adhes" user "F.Adhesive")
    (34 "B.Paste" user)
    (35 "F.Paste" user)
    (36 "B.SilkS" user "B.Silkscreen")
    (37 "F.SilkS" user "F.Silkscreen")
    (38 "B.Mask" user)
    (39 "F.Mask" user)
    (40 "Dwgs.User" user "User.Drawings")
    (41 "Cmts.User" user "User.Comments")
    (42 "Eco1.User" user "User.Eco1")
    (43 "Eco2.User" user "User.Eco2")
    (44 "Edge.Cuts" user)
    (45 "Margin" user)
    (46 "B.CrtYd" user "B.Courtyard")
    (47 "F.CrtYd" user "F.Courtyard")
    (48 "B.Fab" user)
    (49 "F.Fab" user)
  )

  (setup
    (stackup
      (layer "F.SilkS" (type "Top Silk Screen"))
      (layer "F.Paste" (type "Top Solder Paste"))
      (layer "F.Mask" (type "Top Solder Mask") (thickness 0.01))
      (layer "F.Cu" (type "copper") (thickness 0.035))
      (layer "dielectric 1" (type "core") (thickness 1.51) (material "FR4") (epsilon_r 4.5) (loss_tangent 0.02))
      (layer "B.Cu" (type "copper") (thickness 0.035))
      (layer "B.Mask" (type "Bottom Solder Mask") (thickness 0.01))
      (layer "B.Paste" (type "Bottom Solder Paste"))
      (layer "B.SilkS" (type "Bottom Silk Screen"))
      (copper_finish "None")
      (dielectric_constraints no)
    )
    (pad_to_mask_clearance 0)
    (pcbplotparams
      (layerselection 0x00010fc_ffffffff)
      (plot_on_all_layers_selection 0x0000000_00000000)
      (disableapertmacros false)
      (usegerberextensions false)
      (usegerberattributes true)
      (usegerberadvancedattributes true)
      (creategerberjobfile true)
      (dashed_line_dash_ratio 12.000000)
      (dashed_line_gap_ratio 3.000000)
      (svgprecision 4)
      (plotframeref false)
      (viasonmask false)
      (mode 1)
      (useauxorigin false)
      (hpglpennumber 1)
      (hpglpenspeed 20)
      (hpglpendiameter 15.000000)
      (dxfpolygonmode true)
      (dxfimperialunits true)
      (dxfusepcbnewfont true)
      (psnegative false)
      (psa4output false)
      (plotreference true)
      (plotvalue true)
      (plotinvisibletext false)
      (sketchpadsonfab false)
      (subtractmaskfromsilk false)
      (outputformat 1)
      (mirror false)
      (drillshape 1)
      (scaleselection 1)
      (outputdirectory "")
    )
  )

  (net 0 "")
  (net 1 "GND")
  (net 2 "+3V3")
  (net 3 "/PIR_OUT")
  (net 4 "/LCD_CS")
  (net 5 "/LCD_WR")
  (net 6 "/LCD_DATA")
  (net 7 "/TRIAC1")
  (net 8 "/TRIAC2")
  (net 9 "/ZERO_CROSS")
  (net 10 "/TEMP_SENS")
  (net 11 "/BTN_ROW1")
  (net 12 "/BTN_ROW2")
  (net 13 "/BTN_ROW3")
  (net 14 "/BTN_COL1")
  (net 15 "/BTN_COL2")

  (footprint "Package_DFN_QFN:QFN-40-1EP_5x5mm_P0.4mm_EP3.8x3.8mm" (layer "F.Cu")
    (tstamp 00000001-0000-0000-0000-000000000001)
    (at 150 130 0)
    (descr "QFN, 40 Pin, 5x5mm body, 0.4mm pitch")
    (tags "QFN NoLead")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000001-0000-0000-0000-000000000001")
    (attr smd)
    (fp_text reference "U1" (at 0 -3.8) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000001-0000-0000-0000-000000000002)
    )
    (fp_text value "ESP32-C6-WROOM-1" (at 0 3.8) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000001-0000-0000-0000-000000000003)
    )
    (fp_line (start -2.6 -2.6) (end 2.6 -2.6)
      (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000001-0000-0000-0000-000000000004))
    (fp_line (start -2.6 2.6) (end 2.6 2.6)
      (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000001-0000-0000-0000-000000000005))
    (fp_line (start 2.6 -2.6) (end 2.6 2.6)
      (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000001-0000-0000-0000-000000000006))
    (fp_line (start -2.6 -2.6) (end -2.6 2.6)
      (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000001-0000-0000-0000-000000000007))
    (pad "1" smd rect (at -2.4 -1.8) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND") (pinfunction "GND") (pintype "power_in") (tstamp 00000001-0000-0000-0000-000000000008))
    (pad "2" smd rect (at -2.4 -1.4) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "+3V3") (pinfunction "3V3") (pintype "power_in") (tstamp 00000001-0000-0000-0000-000000000009))
    (pad "3" smd rect (at -2.4 -1.0) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "+3V3") (pinfunction "EN") (pintype "input") (tstamp 00000001-0000-0000-0000-00000000000a))
    (pad "4" smd rect (at -2.4 -0.6) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 7 "/TRIAC1") (pinfunction "IO4") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-00000000000b))
    (pad "5" smd rect (at -2.4 -0.2) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 8 "/TRIAC2") (pinfunction "IO5") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-00000000000c))
    (pad "6" smd rect (at -2.4 0.2) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 9 "/ZERO_CROSS") (pinfunction "IO6") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-00000000000d))
    (pad "7" smd rect (at -2.4 0.6) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 3 "/PIR_OUT") (pinfunction "IO7") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-00000000000e))
    (pad "15" smd rect (at 2.4 -1.8) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 4 "/LCD_CS") (pinfunction "IO15") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-00000000000f))
    (pad "16" smd rect (at 2.4 -1.4) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 5 "/LCD_WR") (pinfunction "IO16") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-000000000010))
    (pad "17" smd rect (at 2.4 -1.0) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 6 "/LCD_DATA") (pinfunction "IO17") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-000000000011))
    (pad "18" smd rect (at 2.4 -0.6) (size 0.7 0.25) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 10 "/TEMP_SENS") (pinfunction "IO18") (pintype "bidirectional") (tstamp 00000001-0000-0000-0000-000000000012))
    (pad "EP" smd rect (at 0 0) (size 3.8 3.8) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND") (pinfunction "GND") (pintype "power_in") (tstamp 00000001-0000-0000-0000-000000000013))
    (model "${KICAD6_3DMODEL_DIR}/Package_DFN_QFN.3dshapes/QFN-40-1EP_5x5mm_P0.4mm_EP3.8x3.8mm.wrl"
      (offset (xyz 0 0 0))
      (scale (xyz 1 1 1))
      (rotate (xyz 0 0 0))
    )
  )

  (footprint "Package_SO:SSOP-20_5.3x7.2mm_P0.65mm" (layer "F.Cu")
    (tstamp 00000002-0000-0000-0000-000000000001)
    (at 170 130 0)
    (descr "SSOP, 20 Pin, 5.3x7.2mm body, 0.65mm pitch")
    (tags "SSOP SOP")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000002-0000-0000-0000-000000000001")
    (attr smd)
    (fp_text reference "U2" (at 0 -4.5) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000002-0000-0000-0000-000000000002)
    )
    (fp_text value "HT1621" (at 0 4.5) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000002-0000-0000-0000-000000000003)
    )
    (pad "1" smd rect (at -3.6 -2.925) (size 1.5 0.4) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "GND") (pinfunction "VSS") (pintype "power_in") (tstamp 00000002-0000-0000-0000-000000000004))
    (pad "2" smd rect (at -3.6 -2.275) (size 1.5 0.4) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "+3V3") (pinfunction "VDD") (pintype "power_in") (tstamp 00000002-0000-0000-0000-000000000005))
    (pad "4" smd rect (at -3.6 -0.975) (size 1.5 0.4) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 4 "/LCD_CS") (pinfunction "CS") (pintype "input") (tstamp 00000002-0000-0000-0000-000000000006))
    (pad "5" smd rect (at -3.6 -0.325) (size 1.5 0.4) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 5 "/LCD_WR") (pinfunction "WR") (pintype "input") (tstamp 00000002-0000-0000-0000-000000000007))
    (pad "6" smd rect (at -3.6 0.325) (size 1.5 0.4) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 6 "/LCD_DATA") (pinfunction "DATA") (pintype "bidirectional") (tstamp 00000002-0000-0000-0000-000000000008))
  )

  (footprint "Package_DIP:DIP-4_W7.62mm" (layer "F.Cu")
    (tstamp 00000003-0000-0000-0000-000000000001)
    (at 130 120 0)
    (descr "4-lead through-hole DIP package, row spacing 7.62 mm")
    (tags "THT DIP DIL PDIP 2.54mm 7.62mm")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000003-0000-0000-0000-000000000001")
    (attr through_hole)
    (fp_text reference "U3" (at 3.81 -2.33) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000003-0000-0000-0000-000000000002)
    )
    (fp_text value "PC817" (at 3.81 4.87) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000003-0000-0000-0000-000000000003)
    )
    (pad "1" thru_hole rect (at 0 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask")
      (net 7 "/TRIAC1") (pinfunction "A") (pintype "passive") (tstamp 00000003-0000-0000-0000-000000000004))
    (pad "2" thru_hole oval (at 0 2.54) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask")
      (net 1 "GND") (pinfunction "K") (pintype "passive") (tstamp 00000003-0000-0000-0000-000000000005))
    (pad "3" thru_hole oval (at 7.62 2.54) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask")
      (net 0) (pinfunction "E") (pintype "passive") (tstamp 00000003-0000-0000-0000-000000000006))
    (pad "4" thru_hole oval (at 7.62 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask")
      (net 9 "/ZERO_CROSS") (pinfunction "C") (pintype "passive") (tstamp 00000003-0000-0000-0000-000000000007))
  )

  (footprint "Connector_JST:JST_XH_B3B-XH-A_1x03_P2.50mm_Vertical" (layer "F.Cu")
    (tstamp 00000004-0000-0000-0000-000000000001)
    (at 140 110 90)
    (descr "JST XH series connector, B3B-XH-A, 3 pins, 2.50mm pitch")
    (tags "connector JST XH vertical")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000004-0000-0000-0000-000000000001")
    (attr through_hole)
    (fp_text reference "J1" (at 2.5 -3.55 90) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000004-0000-0000-0000-000000000002)
    )
    (fp_text value "PIR_SENSOR" (at 2.5 4.6 90) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000004-0000-0000-0000-000000000003)
    )
    (pad "1" thru_hole rect (at 0 0 90) (size 1.7 1.7) (drill 1) (layers "*.Cu" "*.Mask")
      (net 2 "+3V3") (pinfunction "VCC") (pintype "passive") (tstamp 00000004-0000-0000-0000-000000000004))
    (pad "2" thru_hole circle (at 2.5 0 90) (size 1.7 1.7) (drill 1) (layers "*.Cu" "*.Mask")
      (net 3 "/PIR_OUT") (pinfunction "OUT") (pintype "passive") (tstamp 00000004-0000-0000-0000-000000000005))
    (pad "3" thru_hole circle (at 5 0 90) (size 1.7 1.7) (drill 1) (layers "*.Cu" "*.Mask")
      (net 1 "GND") (pinfunction "GND") (pintype "passive") (tstamp 00000004-0000-0000-0000-000000000006))
  )

  (footprint "Resistor_SMD:R_0805_2012Metric" (layer "F.Cu")
    (tstamp 00000005-0000-0000-0000-000000000001)
    (at 145 115 0)
    (descr "Resistor SMD 0805 (2012 Metric)")
    (tags "resistor")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000005-0000-0000-0000-000000000001")
    (attr smd)
    (fp_text reference "R1" (at 0 -1.65) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000005-0000-0000-0000-000000000002)
    )
    (fp_text value "10k" (at 0 1.65) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000005-0000-0000-0000-000000000003)
    )
    (pad "1" smd roundrect (at -0.9 0) (size 0.8 1.25) (layers "F.Cu" "F.Paste" "F.Mask") (roundrect_rratio 0.25)
      (net 2 "+3V3") (pintype "passive") (tstamp 00000005-0000-0000-0000-000000000004))
    (pad "2" smd roundrect (at 0.9 0) (size 0.8 1.25) (layers "F.Cu" "F.Paste" "F.Mask") (roundrect_rratio 0.25)
      (net 3 "/PIR_OUT") (pintype "passive") (tstamp 00000005-0000-0000-0000-000000000005))
  )

  (footprint "Capacitor_SMD:C_0805_2012Metric" (layer "F.Cu")
    (tstamp 00000006-0000-0000-0000-000000000001)
    (at 155 135 0)
    (descr "Capacitor SMD 0805 (2012 Metric)")
    (tags "capacitor")
    (property "Sheetfile" "thermor_zigbee_controller.kicad_sch")
    (property "Sheetname" "")
    (path "/00000006-0000-0000-0000-000000000001")
    (attr smd)
    (fp_text reference "C1" (at 0 -1.65) (layer "F.SilkS")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000006-0000-0000-0000-000000000002)
    )
    (fp_text value "100nF" (at 0 1.65) (layer "F.Fab")
        (effects (font (size 1 1) (thickness 0.15)))
      (tstamp 00000006-0000-0000-0000-000000000003)
    )
    (pad "1" smd roundrect (at -0.9 0) (size 0.8 1.25) (layers "F.Cu" "F.Paste" "F.Mask") (roundrect_rratio 0.25)
      (net 2 "+3V3") (pintype "passive") (tstamp 00000006-0000-0000-0000-000000000004))
    (pad "2" smd roundrect (at 0.9 0) (size 0.8 1.25) (layers "F.Cu" "F.Paste" "F.Mask") (roundrect_rratio 0.25)
      (net 1 "GND") (pintype "passive") (tstamp 00000006-0000-0000-0000-000000000005))
  )

  (gr_rect (start 110 100) (end 190 160)
    (stroke (width 0.1) (type default)) (fill none) (layer "Edge.Cuts") (tstamp 00000007-0000-0000-0000-000000000001))

  (segment (start 144.1 115) (end 142.5 115) (width 0.25) (layer "F.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000001))
  (segment (start 142.5 115) (end 142.5 110) (width 0.25) (layer "F.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000002))
  (segment (start 147.6 130.6) (end 147.6 120) (width 0.25) (layer "F.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000003))
  (segment (start 147.6 120) (end 145.9 118.3) (width 0.25) (layer "F.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000004))
  (segment (start 145.9 118.3) (end 145.9 115) (width 0.25) (layer "F.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000005))
  (via (at 142.5 115) (size 0.6) (drill 0.3) (layers "F.Cu" "B.Cu") (net 3) (tstamp 00000008-0000-0000-0000-000000000006))

  (segment (start 154.1 135) (end 152.4 135) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000001))
  (segment (start 152.4 135) (end 152.4 132.4) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000002))
  (segment (start 140 110) (end 140 113) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000003))
  (segment (start 140 113) (end 144.1 113) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000004))
  (segment (start 144.1 113) (end 144.1 115) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000005))
  (segment (start 166.4 132.275) (end 164 132.275) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000006))
  (segment (start 164 132.275) (end 152.4 132.275) (width 0.25) (layer "F.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000007))
  (via (at 152.4 132.4) (size 0.6) (drill 0.3) (layers "F.Cu" "B.Cu") (net 2) (tstamp 00000009-0000-0000-0000-000000000008))

  (segment (start 155.9 135) (end 157.6 135) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000001))
  (segment (start 157.6 135) (end 157.6 140) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000002))
  (segment (start 145 110) (end 145 107) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000003))
  (segment (start 130 122.54) (end 128 122.54) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000004))
  (segment (start 166.4 132.925) (end 164 132.925) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000005))
  (segment (start 147.6 132.4) (end 147.6 140) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000006))
  (segment (start 147.6 140) (end 157.6 140) (width 0.25) (layer "F.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000007))
  (via (at 157.6 140) (size 0.6) (drill 0.3) (layers "F.Cu" "B.Cu") (net 1) (tstamp 00000010-0000-0000-0000-000000000008))
  
  (zone (net 1) (net_name "GND") (layer "B.Cu") (tstamp 00000011-0000-0000-0000-000000000001) (hatch edge 0.5)
    (connect_pads (clearance 0.5))
    (min_thickness 0.25) (filled_areas_thickness no)
    (fill yes (thermal_gap 0.5) (thermal_bridge_width 0.5))
    (polygon
      (pts
        (xy 112 102)
        (xy 188 102)
        (xy 188 158)
        (xy 112 158)
      )
    )
  )

)