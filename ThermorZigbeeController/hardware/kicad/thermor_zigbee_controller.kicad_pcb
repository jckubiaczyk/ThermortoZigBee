(kicad_pcb (version 20221018) (generator pcbnew)

  (general
    (thickness 1.6)
  )

  (paper "A4")
  (layers
    (0 "F.Cu" signal)
    (31 "B.Cu" signal)
    (32 "B.Adhes" user "B.Adhesive")
    (33 "F.Adhes" user "F.Adhesive")
    (34 "B.Paste" user)
    (35 "F.Paste" user)
    (36 "B.SilkS" user "B.Silkscreen")
    (37 "F.SilkS" user "F.Silkscreen")
    (38 "B.Mask" user)
    (39 "F.Mask" user)
    (40 "Dwgs.User" user "User.Drawings")
    (41 "Cmts.User" user "User.Comments")
    (42 "Eco1.User" user "User.Eco1")
    (43 "Eco2.User" user "User.Eco2")
    (44 "Edge.Cuts" user)
    (45 "Margin" user)
    (46 "B.CrtYd" user "B.Courtyard")
    (47 "F.CrtYd" user "F.Courtyard")
    (48 "B.Fab" user)
    (49 "F.Fab" user)
  )

  (setup
    (stackup
      (layer "F.SilkS" (type "Top Silk Screen"))
      (layer "F.Paste" (type "Top Solder Paste"))
      (layer "F.Mask" (type "Top Solder Mask") (thickness 0.01))
      (layer "F.Cu" (type "copper") (thickness 0.035))
      (layer "dielectric 1" (type "core") (thickness 1.51) (material "FR4") (epsilon_r 4.5) (loss_tangent 0.02))
      (layer "B.Cu" (type "copper") (thickness 0.035))
      (layer "B.Mask" (type "Bottom Solder Mask") (thickness 0.01))
      (layer "B.Paste" (type "Bottom Solder Paste"))
      (layer "B.SilkS" (type "Bottom Silk Screen"))
      (copper_finish "None")
      (dielectric_constraints no)
    )
    (pad_to_mask_clearance 0)
    (aux_axis_origin 100 80)
    (pcbplotparams
      (layerselection 0x00010fc_ffffffff)
      (plot_on_all_layers_selection 0x0000000_00000000)
      (disableapertmacros false)
      (usegerberextensions false)
      (usegerberattributes true)
      (usegerberadvancedattributes true)
      (creategerberjobfile true)
      (dashed_line_dash_ratio 12.000000)
      (dashed_line_gap_ratio 3.000000)
      (svgprecision 4)
      (plotframeref false)
      (viasonmask false)
      (mode 1)
      (useauxorigin false)
      (hpglpennumber 1)
      (hpglpenspeed 20)
      (hpglpendiameter 15.000000)
      (dxfpolygonmode true)
      (dxfimperialunits true)
      (dxfusepcbnewfont true)
      (psnegative false)
      (psa4output false)
      (plotreference true)
      (plotvalue true)
      (plotinvisibletext false)
      (sketchpadsonfab false)
      (subtractmaskfromsilk false)
      (outputformat 1)
      (mirror false)
      (drillshape 1)
      (scaleselection 1)
      (outputdirectory "")
    )
  )

  (net 0 "")
  (net 1 "+3V3")
  (net 2 "GND")
  (net 3 "AC_L")
  (net 4 "AC_N")
  (net 5 "TRIAC1")
  (net 6 "TRIAC2")
  (net 7 "TRIAC3")
  (net 8 "LCD_CS")
  (net 9 "LCD_WR")
  (net 10 "LCD_DATA")
  (net 11 "USB_D+")
  (net 12 "USB_D-")

  ;; Zone isolation haute tension / basse tension
  (zone (net 0) (net_name "HV_ISOLATION") (layer "F.Cu") (tstamp 00000001)
    (hatch edge 0.508)
    (connect_pads (clearance 5))
    (min_thickness 0.254)
    (filled_areas_thickness no)
    (fill yes (thermal_gap 0.508) (thermal_bridge_width 0.508))
    (polygon
      (pts
        (xy 100 95)
        (xy 180 95)
        (xy 180 97)
        (xy 100 97)
      )
    )
  )

  ;; Contour de la carte
  (gr_rect (start 100 80) (end 220 180)
    (stroke (width 0.1) (type solid)) (layer "Edge.Cuts") (fill none))

  ;; Composants plac√©s par zones

  ;; ZONE ALIMENTATION (coin bas-gauche, isolation HT)
  (footprint "Converter_ACDC:Converter_ACDC_HiLink_HLK-PMxx" (layer "F.Cu")
    (tstamp 10000007)
    (at 115 170 180)
    (descr "AC-DC converter HiLink HLK-PMxx")
    (tags "AC-DC converter HiLink")
    (property "Reference" "U7" (at 0 -11.5 0) (layer "F.SilkS"))
    (property "Value" "HLK-PM03" (at 0 11.5 0) (layer "F.Fab"))
    (path "/10000007")
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 -7.5) (size 1.8 1.8) (drill 1) (layers "*.Cu" "*.Mask")
      (net 3 "AC_L"))
    (pad "2" thru_hole circle (at 0 -2.5) (size 1.8 1.8) (drill 1) (layers "*.Cu" "*.Mask")
      (net 4 "AC_N"))
    (pad "3" thru_hole circle (at 0 2.5) (size 1.8 1.8) (drill 1) (layers "*.Cu" "*.Mask")
      (net 2 "GND"))
    (pad "4" thru_hole circle (at 0 7.5) (size 1.8 1.8) (drill 1) (layers "*.Cu" "*.Mask")
      (net 1 "+3V3"))
  )

  ;; ZONE MCU (centre de la carte)
  (footprint "RF_Module:ESP32-C6-WROOM-1" (layer "F.Cu")
    (tstamp 10000001)
    (at 160 120)
    (descr "ESP32-C6-WROOM-1 WiFi/BT/Zigbee Module")
    (tags "ESP32-C6 WiFi Bluetooth Zigbee")
    (property "Reference" "U1" (at 0 -12.5 0) (layer "F.SilkS"))
    (property "Value" "ESP32-C6-WROOM-1" (at 0 12.5 0) (layer "F.Fab"))
    (path "/10000001")
    (attr smd)
    (pad "1" smd rect (at -8.5 -8.89) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "+3V3"))
    (pad "2" smd rect (at -8.5 -7.62) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask"))
    (pad "3" smd rect (at -8.5 -6.35) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 8 "LCD_CS"))
    (pad "4" smd rect (at -8.5 -5.08) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 9 "LCD_WR"))
    (pad "5" smd rect (at -8.5 -3.81) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 10 "LCD_DATA"))
    (pad "20" smd rect (at 8.5 -3.81) (size 0.9 1.5) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "GND"))
    (pad "25" smd rect (at 6.35 -9.4) (size 1.5 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 11 "USB_D+"))
    (pad "26" smd rect (at 5.08 -9.4) (size 1.5 0.9) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 12 "USB_D-"))
  )

  ;; ZONE INTERFACE (haut de la carte)
  (footprint "Package_SO:SSOP-28_5.3x10.2mm_P0.65mm" (layer "F.Cu")
    (tstamp 10000002)
    (at 140 90)
    (descr "SSOP, 28 Pin")
    (tags "SSOP SO")
    (property "Reference" "U2" (at 0 -6.2 0) (layer "F.SilkS"))
    (property "Value" "HT1621" (at 0 6.2 0) (layer "F.Fab"))
    (path "/10000002")
    (attr smd)
    (pad "1" smd rect (at -3.6 -4.225) (size 1.75 0.45) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 1 "+3V3"))
    (pad "2" smd rect (at -3.6 -3.575) (size 1.75 0.45) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 2 "GND"))
    (pad "10" smd rect (at -3.6 1.625) (size 1.75 0.45) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 8 "LCD_CS"))
    (pad "11" smd rect (at -3.6 2.275) (size 1.75 0.45) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 9 "LCD_WR"))
    (pad "12" smd rect (at -3.6 2.925) (size 1.75 0.45) (layers "F.Cu" "F.Paste" "F.Mask")
      (net 10 "LCD_DATA"))
  )

  ;; ZONE CONTROLE TRIACS (droite, isolation HT)
  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tstamp 10000011)
    (at 195 150)
    (descr "6-lead though-hole mounted DIP package")
    (tags "THT DIP DIL PDIP")
    (property "Reference" "Q4" (at 3.81 -2.33 0) (layer "F.SilkS"))
    (property "Value" "MOC3021" (at 3.81 7.62 0) (layer "F.Fab"))
    (path "/10000011")
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask"))
    (pad "2" thru_hole oval (at 0 2.54) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask"))
    (pad "4" thru_hole oval (at 7.62 5.08) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask")
      (net 5 "TRIAC1"))
    (pad "6" thru_hole oval (at 7.62 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask"))
  )

  ;; Connecteurs
  (footprint "Connector_USB:USB_C_Receptacle_USB2.0" (layer "F.Cu")
    (tstamp 10000020)
    (at 110 100)
    (descr "USB Type C Receptacle")
    (tags "USB USB_C USB TYPE-C")
    (property "Reference" "J1" (at 0 -4.935 0) (layer "F.SilkS"))
    (property "Value" "USB-C" (at 0 4.79 0) (layer "F.Fab"))
    (path "/10000020")
    (attr smd)
  )

  ;; Terminal blocks
  (footprint "TerminalBlock_Phoenix:TerminalBlock_Phoenix_MKDS-1,5-3_1x03_P5.00mm_Horizontal" (layer "F.Cu")
    (tstamp 10000023)
    (at 105 160)
    (descr "Terminal Block Phoenix MKDS-1,5-3")
    (tags "Terminal Block Phoenix MKDS-1,5-3")
    (property "Reference" "J4" (at 5 -5.55 0) (layer "F.SilkS"))
    (property "Value" "AC_Input" (at 5 5.66 0) (layer "F.Fab"))
    (path "/10000023")
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0) (size 2.6 2.6) (drill 1.3) (layers "*.Cu" "*.Mask")
      (net 3 "AC_L"))
    (pad "2" thru_hole circle (at 5 0) (size 2.6 2.6) (drill 1.3) (layers "*.Cu" "*.Mask")
      (net 4 "AC_N"))
    (pad "3" thru_hole circle (at 10 0) (size 2.6 2.6) (drill 1.3) (layers "*.Cu" "*.Mask"))
  )

  ;; JST Connectors
  (footprint "Connector_JST:JST_XH_B6B-XH-A_1x06_P2.50mm_Vertical" (layer "F.Cu")
    (tstamp 10000021)
    (at 120 85)
    (descr "JST XH series connector")
    (tags "JST XH vertical")
    (property "Reference" "J2" (at 6.25 -3.55 0) (layer "F.SilkS"))
    (property "Value" "LCD_Conn" (at 6.25 4.6 0) (layer "F.Fab"))
    (path "/10000021")
    (attr through_hole)
  )

  ;; Texte info
  (gr_text "THERMOR ZIGBEE CONTROLLER V1.0" (at 160 85) (layer "F.SilkS")
    (effects (font (size 1 1) (thickness 0.15)))
  )
  
  (gr_text "HIGH VOLTAGE" (at 195 165) (layer "F.SilkS")
    (effects (font (size 1 1) (thickness 0.15)))
  )

  (gr_text "DANGER 230V" (at 195 168) (layer "F.SilkS")
    (effects (font (size 0.8 0.8) (thickness 0.15)))
  )

)